var cinesa = [
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 2", 
            "times": [
              "20:00", 
              "22:00", 
              "00:01"
            ]
          }
        ]
      }
    ], 
    "title": "AYER NO TERMINA NUNCA"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 19", 
            "times": [
              "20:30", 
              "22:40", 
              "00:50"
            ]
          }, 
          {
            "room": "Sala 3", 
            "times": [
              "19:30", 
              "22:00", 
              "00:10"
            ]
          }
        ]
      }
    ], 
    "title": "COMBUSTI\u00d3N"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 6", 
            "times": [
              "20:25"
            ]
          }
        ]
      }
    ], 
    "title": "DANDO LA NOTA"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 14", 
            "times": [
              "22:40", 
              "00:50"
            ]
          }
        ]
      }
    ], 
    "title": "EFECTOS SECUNDARIOS"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 15", 
            "times": [
              "20:30", 
              "22:45", 
              "01:00"
            ]
          }
        ]
      }
    ], 
    "title": "G.I JOE 2: LA VENGANZA"
  }, 
  {
    "sessions": [
      {
        "type": "3D RealD", 
        "times": [
          {
            "room": "Sala 12", 
            "times": [
              "20:45"
            ]
          }, 
          {
            "room": "Sala 18", 
            "times": [
              "18:45", 
              "00:15"
            ]
          }, 
          {
            "room": "Sala 9", 
            "times": [
              "22:00"
            ]
          }
        ]
      }, 
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 10", 
            "times": [
              "19:30", 
              "22:20"
            ]
          }, 
          {
            "room": "Sala 12", 
            "times": [
              "23:30"
            ]
          }, 
          {
            "room": "Sala 18", 
            "times": [
              "21:30"
            ]
          }, 
          {
            "room": "Sala 9", 
            "times": [
              "19:10", 
              "00:50"
            ]
          }
        ]
      }, 
      {
        "type": "IMAX \u00ae 3D", 
        "times": [
          {
            "room": "Sala 11", 
            "times": [
              "20:00", 
              "22:45"
            ]
          }
        ]
      }
    ], 
    "title": "IRON MAN 3"
  }, 
  {
    "sessions": [
      {
        "type": "3D RealD", 
        "times": [
          {
            "room": "Sala 8", 
            "times": [
              "19:20"
            ]
          }
        ]
      }, 
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 4", 
            "times": [
              "20:20"
            ]
          }
        ]
      }
    ], 
    "title": "LOS CROODS"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 17", 
            "times": [
              "20:15", 
              "22:30", 
              "00:35"
            ]
          }
        ]
      }
    ], 
    "title": "MEMORIAS DE UN ZOMBIE ADOLESCENTE"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 1", 
            "times": [
              "19:00", 
              "22:00", 
              "00:35"
            ]
          }, 
          {
            "room": "Sala 20", 
            "times": [
              "20:45", 
              "23:30"
            ]
          }
        ]
      }
    ], 
    "title": "OBLIVION"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 7", 
            "times": [
              "19:00"
            ]
          }
        ]
      }
    ], 
    "title": "OZ, UN MUNDO DE FANTAS\u00cdA"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 16", 
            "times": [
              "18:30", 
              "20:30", 
              "22:30", 
              "00:40"
            ]
          }
        ]
      }
    ], 
    "title": "POSESI\u00d3N INFERNAL"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 10", 
            "times": [
              "00:55"
            ]
          }, 
          {
            "room": "Sala 14", 
            "times": [
              "20:30"
            ]
          }
        ]
      }
    ], 
    "title": "TESIS SOBRE UN HOMICIDIO"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 7", 
            "times": [
              "22:00", 
              "00:35"
            ]
          }
        ]
      }
    ], 
    "title": "THE HOST"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 6", 
            "times": [
              "22:40", 
              "00:50"
            ]
          }
        ]
      }
    ], 
    "title": "TIERRA PROMETIDA"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 4", 
            "times": [
              "22:30", 
              "00:40"
            ]
          }
        ]
      }
    ], 
    "title": "TIPOS LEGALES"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 8", 
            "times": [
              "21:30", 
              "00:01"
            ]
          }
        ]
      }
    ], 
    "title": "UN AMOR ENTRE DOS MUNDOS"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 13", 
            "times": [
              "20:15", 
              "22:15", 
              "00:20"
            ]
          }
        ]
      }
    ], 
    "title": "UN GRAN EQUIPO"
  }, 
  {
    "sessions": [
      {
        "type": "Digital", 
        "times": [
          {
            "room": "Sala 5", 
            "times": [
              "20:30", 
              "22:45", 
              "01:00"
            ]
          }
        ]
      }
    ], 
    "title": "UN LUGAR DONDE REFUGIARSE"
  }
]; 

/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
(function(){
  var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;
 
  // The base Class implementation (does nothing)
  this.Class = function(){};
 
  // Create a new Class that inherits from this class
  Class.extend = function(prop) {
    var _super = this.prototype;
   
    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    var prototype = new this();
    initializing = false;
   
    // Copy the properties over onto the new prototype
    for (var name in prop) {
      // Check if we're overwriting an existing function
      prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" && fnTest.test(prop[name]) ?
        (function(name, fn){
          return function() {
            var tmp = this._super;
           
            // Add a new ._super() method that is the same method
            // but on the super-class
            this._super = _super[name];
           
            // The method only need to be bound temporarily, so we
            // remove it when we're done executing
            var ret = fn.apply(this, arguments);        
            this._super = tmp;
           
            return ret;
          };
        })(name, prop[name]) :
        prop[name];
    }
   
    // The dummy class constructor
    function Class() {
      // All construction is actually done in the init method
      if ( !initializing && this.init )
        this.init.apply(this, arguments);
    }
   
    // Populate our constructed prototype object
    Class.prototype = prototype;
   
    // Enforce the constructor to be what we expect
    Class.prototype.constructor = Class;
 
    // And make this class extendable
    Class.extend = arguments.callee;
   
    return Class;
  };
})();

var Listing =  Class.extend({
  init: function(json) { 
    this.data = json;		
  },
  get_html: function() {
    output = "";
    output = output.concat("<h2>Festival Park</h2>");
    for (i in this.data) {
      movie = this.data[i];
      console.log(movie['title']);
      output = output.concat("<h3>"+movie['title']+"</h3>");
      output = output.concat('<table class="table table-striped">'); 
      output = output.concat('<tbody>');
      for (j in movie['sessions']) {
        session = movie['sessions'][j];
        console.log(session['type']);
        
        for(k in session['times']) {
          times = session['times'][k]; 
          console.log(times["room"]); 
          
          output = output.concat("<tr>");
          output = output.concat('<td class="room">'+times["room"]+" ("+session["type"]+")</td>");
          output = output.concat('<td class="times">');
          for (n in times['times']) {
            console.log(times['times'][n]);
            output = output.concat(times['times'][n]+" ");
          }
          output = output.concat('</td>');
          output = output.concat('</tr>');
        }
      }
      output = output.concat('</tbody>');
      output = output.concat('</table>');
    }
    console.log(output);
    document.write(output);
  }
});